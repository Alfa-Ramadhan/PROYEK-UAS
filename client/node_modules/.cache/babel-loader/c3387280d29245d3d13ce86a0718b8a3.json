{"ast":null,"code":"var _jsxFileName = \"C:\\\\Kuliah\\\\Semester 6\\\\Topik Khusus\\\\MovieStore\\\\client\\\\src\\\\pages\\\\Admin\\\\Dashboard\\\\Dashboard.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Grid } from '@material-ui/core';\nimport { TotalUsers, TotalCinemas, TotalMovies, TotalReservations, BestMovies, UsersByDevice } from './components';\nimport { getUsers, getCinemas, getMovies, getReservations } from '../../../store/actions';\nconst styles = theme => ({\n  root: {\n    textAlign: 'center',\n    padding: theme.spacing(4)\n  }\n});\nclass Dashboard extends Component {\n  constructor(...args) {\n    super(...args);\n    this.getBestMovies = (reservations, movies, total = 5) => {\n      const reservationCounter = reservations.map(reservation => ({\n        movieId: reservation.movieId,\n        count: reservations.filter(r => r.movieId === reservation.movieId).length\n      }));\n      const result = [];\n      const map = new Map();\n      for (const item of reservationCounter) {\n        if (!map.has(item.movieId)) {\n          map.set(item.movieId, true); // set any value to Map\n          result.push({\n            movieId: item.movieId,\n            count: item.count\n          });\n        }\n      }\n      return result.sort((a, b) => b.count - a.count).slice(0, total).map(res => ({\n        movie: movies.find(movie => movie._id === res.movieId),\n        count: res.count\n      }));\n    };\n  }\n  componentDidMount() {\n    this.props.getUsers();\n    this.props.getCinemas();\n    this.props.getMovies();\n    this.props.getReservations();\n  }\n  render() {\n    const {\n      classes,\n      users,\n      cinemas,\n      movies,\n      reservations\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      lg: 3,\n      sm: 6,\n      xl: 3,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TotalUsers, {\n      users: users.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      lg: 3,\n      sm: 6,\n      xl: 3,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TotalCinemas, {\n      cinemas: cinemas.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      lg: 3,\n      sm: 6,\n      xl: 3,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TotalMovies, {\n      movies: movies.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      lg: 3,\n      sm: 6,\n      xl: 3,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TotalReservations, {\n      reservations: reservations.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      lg: 8,\n      md: 12,\n      xl: 9,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(BestMovies, {\n      bestMovies: this.getBestMovies(reservations, movies, 5),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      lg: 4,\n      md: 6,\n      xl: 3,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(UsersByDevice, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }))));\n  }\n}\nconst mapStateToProps = ({\n  userState,\n  cinemaState,\n  movieState,\n  reservationState\n}) => ({\n  users: userState.users,\n  cinemas: cinemaState.cinemas,\n  movies: movieState.movies,\n  reservations: reservationState.reservations\n});\nconst mapDispatchToProps = {\n  getUsers,\n  getCinemas,\n  getMovies,\n  getReservations\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Dashboard));","map":{"version":3,"names":["React","Component","connect","withStyles","Grid","TotalUsers","TotalCinemas","TotalMovies","TotalReservations","BestMovies","UsersByDevice","getUsers","getCinemas","getMovies","getReservations","styles","theme","root","textAlign","padding","spacing","Dashboard","constructor","args","getBestMovies","reservations","movies","total","reservationCounter","map","reservation","movieId","count","filter","r","length","result","Map","item","has","set","push","sort","a","b","slice","res","movie","find","_id","componentDidMount","props","render","classes","users","cinemas","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","container","lg","sm","xl","xs","md","bestMovies","mapStateToProps","userState","cinemaState","movieState","reservationState","mapDispatchToProps"],"sources":["C:/Kuliah/Semester 6/Topik Khusus/MovieStore/client/src/pages/Admin/Dashboard/Dashboard.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, Grid } from '@material-ui/core';\r\nimport {\r\n  TotalUsers,\r\n  TotalCinemas,\r\n  TotalMovies,\r\n  TotalReservations,\r\n  BestMovies,\r\n  UsersByDevice\r\n} from './components';\r\nimport {\r\n  getUsers,\r\n  getCinemas,\r\n  getMovies,\r\n  getReservations\r\n} from '../../../store/actions';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    textAlign: 'center',\r\n    padding: theme.spacing(4)\r\n  }\r\n});\r\n\r\nclass Dashboard extends Component {\r\n  componentDidMount() {\r\n    this.props.getUsers();\r\n    this.props.getCinemas();\r\n    this.props.getMovies();\r\n    this.props.getReservations();\r\n  }\r\n\r\n  getBestMovies = (reservations, movies, total = 5) => {\r\n    const reservationCounter = reservations.map(reservation => ({\r\n      movieId: reservation.movieId,\r\n      count: reservations.filter(r => r.movieId === reservation.movieId).length\r\n    }));\r\n\r\n    const result = [];\r\n    const map = new Map();\r\n    for (const item of reservationCounter) {\r\n      if (!map.has(item.movieId)) {\r\n        map.set(item.movieId, true); // set any value to Map\r\n        result.push({\r\n          movieId: item.movieId,\r\n          count: item.count\r\n        });\r\n      }\r\n    }\r\n    return result\r\n      .sort((a, b) => b.count - a.count)\r\n      .slice(0, total)\r\n      .map(res => ({\r\n        movie: movies.find(movie => movie._id === res.movieId),\r\n        count: res.count\r\n      }));\r\n  };\r\n\r\n  render() {\r\n    const { classes, users, cinemas, movies, reservations } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <Grid container spacing={4}>\r\n          <Grid item lg={3} sm={6} xl={3} xs={12}>\r\n            <TotalUsers users={users.length} />\r\n          </Grid>\r\n          <Grid item lg={3} sm={6} xl={3} xs={12}>\r\n            <TotalCinemas cinemas={cinemas.length} />\r\n          </Grid>\r\n          <Grid item lg={3} sm={6} xl={3} xs={12}>\r\n            <TotalMovies movies={movies.length} />\r\n          </Grid>\r\n          <Grid item lg={3} sm={6} xl={3} xs={12}>\r\n            <TotalReservations reservations={reservations.length} />\r\n          </Grid>\r\n          <Grid item lg={8} md={12} xl={9} xs={12}>\r\n            <BestMovies\r\n              bestMovies={this.getBestMovies(reservations, movies, 5)}\r\n            />\r\n          </Grid>\r\n          <Grid item lg={4} md={6} xl={3} xs={12}>\r\n            <UsersByDevice />\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({\r\n  userState,\r\n  cinemaState,\r\n  movieState,\r\n  reservationState\r\n}) => ({\r\n  users: userState.users,\r\n  cinemas: cinemaState.cinemas,\r\n  movies: movieState.movies,\r\n  reservations: reservationState.reservations\r\n});\r\nconst mapDispatchToProps = {\r\n  getUsers,\r\n  getCinemas,\r\n  getMovies,\r\n  getReservations\r\n};\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(styles)(Dashboard));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}