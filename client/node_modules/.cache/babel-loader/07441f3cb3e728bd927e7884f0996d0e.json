{"ast":null,"code":"var _jsxFileName = \"C:\\\\Kuliah\\\\Semester 6\\\\Topik Khusus\\\\MovieStore\\\\client\\\\src\\\\pages\\\\Public\\\\BookingPage\\\\components\\\\BookingForm\\\\BookingForm.js\";\nimport React, { useState } from 'react';\nimport { Grid, Box, TextField, MenuItem, Typography } from '@material-ui/core';\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers';\nimport MomentUtils from '@date-io/moment';\nimport BookingSeats from '../BookingSeats/BookingSeats';\nexport default function BookingForm(props) {\n  const {\n    cinemas,\n    showtimes,\n    selectedCinema,\n    onChangeCinema,\n    selectedDate,\n    onChangeDate,\n    times,\n    selectedTime,\n    onChangeTime\n  } = props;\n\n  // ✅ Tambahkan state untuk seats\n  const [seats, setSeats] = useState([{\n    label: 'A',\n    seats: [1, 1, 0, 1, 1]\n  }, {\n    label: 'B',\n    seats: [1, null, 0, 1, 3]\n  }, {\n    label: 'C',\n    seats: [1, 2, 2, 1, 0]\n  }]);\n\n  // ✅ Fungsi untuk menangani klik pada kursi\n  const handleSelectSeat = (rowIndex, colIndex) => {\n    setSeats(prevSeats => {\n      const updated = [...prevSeats];\n      const row = {\n        ...updated[rowIndex]\n      };\n      const seatsInRow = [...row.seats];\n      const currentStatus = seatsInRow[colIndex];\n      if (currentStatus === 0 || currentStatus === null) return updated;\n      seatsInRow[colIndex] = currentStatus === 2 ? 1 : 2;\n      updated[rowIndex] = {\n        ...row,\n        seats: seatsInRow\n      };\n      return updated;\n    });\n  };\n\n  // Cari showtime berdasarkan cinema yang dipilih\n  const showtime = showtimes.find(showtime => showtime.cinemaIds === selectedCinema);\n\n  // Jika tidak ada cinema tersedia, tampilkan pesan\n  if (!cinemas.length) {\n    return /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      width: 1,\n      height: 1,\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      align: \"center\",\n      variant: \"h2\",\n      color: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, \"No Cinema Available.\"));\n  }\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    select: true,\n    value: selectedCinema,\n    label: \"Select Cinema\",\n    variant: \"outlined\",\n    onChange: onChangeCinema,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, cinemas.map(cinema => /*#__PURE__*/React.createElement(MenuItem, {\n    key: cinema._id,\n    value: cinema._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, cinema.name)))), showtime && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: MomentUtils,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(KeyboardDatePicker, {\n    inputVariant: \"outlined\",\n    margin: \"none\",\n    fullWidth: true,\n    id: \"start-date\",\n    label: \"Start Date\",\n    format: \"MM/DD/YYYY\",\n    minDate: new Date(showtime.startDate),\n    maxDate: new Date(showtime.endDate),\n    value: selectedDate,\n    onChange: date => onChangeDate(date ? date.toDate() : null),\n    KeyboardButtonProps: {\n      'aria-label': 'change date'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }))), selectedDate && Array.isArray(times) && times.length > 0 && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    select: true,\n    value: selectedTime,\n    label: \"Select Time\",\n    variant: \"outlined\",\n    onChange: onChangeTime,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, times.map((time, index) => /*#__PURE__*/React.createElement(MenuItem, {\n    key: time + '-' + index,\n    value: time,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, time)))), selectedTime && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BookingSeats, {\n    seats: seats,\n    onSelectSeat: handleSelectSeat,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  })));\n}","map":{"version":3,"names":["React","useState","Grid","Box","TextField","MenuItem","Typography","MuiPickersUtilsProvider","KeyboardDatePicker","MomentUtils","BookingSeats","BookingForm","props","cinemas","showtimes","selectedCinema","onChangeCinema","selectedDate","onChangeDate","times","selectedTime","onChangeTime","seats","setSeats","label","handleSelectSeat","rowIndex","colIndex","prevSeats","updated","row","seatsInRow","currentStatus","showtime","find","cinemaIds","length","createElement","display","width","height","alignItems","justifyContent","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","align","variant","color","container","spacing","item","xs","fullWidth","select","value","onChange","map","cinema","key","_id","name","utils","inputVariant","margin","id","format","minDate","Date","startDate","maxDate","endDate","date","toDate","KeyboardButtonProps","Array","isArray","time","index","onSelectSeat"],"sources":["C:/Kuliah/Semester 6/Topik Khusus/MovieStore/client/src/pages/Public/BookingPage/components/BookingForm/BookingForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Grid,\r\n  Box,\r\n  TextField,\r\n  MenuItem,\r\n  Typography\r\n} from '@material-ui/core';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker\r\n} from '@material-ui/pickers';\r\nimport MomentUtils from '@date-io/moment';\r\nimport BookingSeats from '../BookingSeats/BookingSeats';\r\n\r\nexport default function BookingForm(props) {\r\n  const {\r\n    cinemas,\r\n    showtimes,\r\n    selectedCinema,\r\n    onChangeCinema,\r\n    selectedDate,\r\n    onChangeDate,\r\n    times,\r\n    selectedTime,\r\n    onChangeTime\r\n  } = props;\r\n\r\n  // ✅ Tambahkan state untuk seats\r\n  const [seats, setSeats] = useState([\r\n    { label: 'A', seats: [1, 1, 0, 1, 1] },\r\n    { label: 'B', seats: [1, null, 0, 1, 3] },\r\n    { label: 'C', seats: [1, 2, 2, 1, 0] },\r\n  ]);\r\n\r\n  // ✅ Fungsi untuk menangani klik pada kursi\r\n  const handleSelectSeat = (rowIndex, colIndex) => {\r\n    setSeats(prevSeats => {\r\n      const updated = [...prevSeats];\r\n      const row = { ...updated[rowIndex] };\r\n      const seatsInRow = [...row.seats];\r\n\r\n      const currentStatus = seatsInRow[colIndex];\r\n      if (currentStatus === 0 || currentStatus === null) return updated;\r\n\r\n      seatsInRow[colIndex] = currentStatus === 2 ? 1 : 2;\r\n\r\n      updated[rowIndex] = {\r\n        ...row,\r\n        seats: seatsInRow\r\n      };\r\n\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  // Cari showtime berdasarkan cinema yang dipilih\r\n  const showtime = showtimes.find(\r\n    showtime => showtime.cinemaIds === selectedCinema\r\n  );\r\n\r\n  // Jika tidak ada cinema tersedia, tampilkan pesan\r\n  if (!cinemas.length) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        width={1}\r\n        height={1}\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\">\r\n        <Typography align=\"center\" variant=\"h2\" color=\"inherit\">\r\n          No Cinema Available.\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={3}>\r\n      {/* Dropdown Cinema */}\r\n      <Grid item xs>\r\n        <TextField\r\n          fullWidth\r\n          select\r\n          value={selectedCinema}\r\n          label=\"Select Cinema\"\r\n          variant=\"outlined\"\r\n          onChange={onChangeCinema}>\r\n          {cinemas.map(cinema => (\r\n            <MenuItem key={cinema._id} value={cinema._id}>\r\n              {cinema.name}\r\n            </MenuItem>\r\n          ))}\r\n        </TextField>\r\n      </Grid>\r\n\r\n      {/* Tanggal Tersedia */}\r\n      {showtime && (\r\n        <Grid item xs>\r\n          <MuiPickersUtilsProvider utils={MomentUtils}>\r\n            <KeyboardDatePicker\r\n              inputVariant=\"outlined\"\r\n              margin=\"none\"\r\n              fullWidth\r\n              id=\"start-date\"\r\n              label=\"Start Date\"\r\n              format=\"MM/DD/YYYY\"\r\n              minDate={new Date(showtime.startDate)}\r\n              maxDate={new Date(showtime.endDate)}\r\n              value={selectedDate}\r\n              onChange={(date) => onChangeDate(date ? date.toDate() : null)}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date'\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>\r\n        </Grid>\r\n      )}\r\n\r\n      {/* Waktu tersedia */}\r\n      {selectedDate && Array.isArray(times) && times.length > 0 && (\r\n        <Grid item xs>\r\n          <TextField\r\n            fullWidth\r\n            select\r\n            value={selectedTime}\r\n            label=\"Select Time\"\r\n            variant=\"outlined\"\r\n            onChange={onChangeTime}>\r\n            {times.map((time, index) => (\r\n              <MenuItem key={time + '-' + index} value={time}>\r\n                {time}\r\n              </MenuItem>\r\n            ))}\r\n          </TextField>\r\n        </Grid>\r\n      )}\r\n\r\n      {/* Tampilan tempat duduk */}\r\n      {selectedTime && (\r\n        <Grid item xs={12}>\r\n          <BookingSeats\r\n            seats={seats}\r\n            onSelectSeat={handleSelectSeat}\r\n          />\r\n        </Grid>\r\n      )}\r\n    </Grid>\r\n  );\r\n}\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SACEC,IAAI,EACJC,GAAG,EACHC,SAAS,EACTC,QAAQ,EACRC,UAAU,QACL,mBAAmB;AAC1B,SACEC,uBAAuB,EACvBC,kBAAkB,QACb,sBAAsB;AAC7B,OAAOC,WAAW,MAAM,iBAAiB;AACzC,OAAOC,YAAY,MAAM,8BAA8B;AAEvD,eAAe,SAASC,WAAWA,CAACC,KAAK,EAAE;EACzC,MAAM;IACJC,OAAO;IACPC,SAAS;IACTC,cAAc;IACdC,cAAc;IACdC,YAAY;IACZC,YAAY;IACZC,KAAK;IACLC,YAAY;IACZC;EACF,CAAC,GAAGT,KAAK;;EAET;EACA,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGtB,QAAQ,CAAC,CACjC;IAAEuB,KAAK,EAAE,GAAG;IAAEF,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;EAAE,CAAC,EACtC;IAAEE,KAAK,EAAE,GAAG;IAAEF,KAAK,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;EAAE,CAAC,EACzC;IAAEE,KAAK,EAAE,GAAG;IAAEF,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;EAAE,CAAC,CACvC,CAAC;;EAEF;EACA,MAAMG,gBAAgB,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,KAAK;IAC/CJ,QAAQ,CAACK,SAAS,IAAI;MACpB,MAAMC,OAAO,GAAG,CAAC,GAAGD,SAAS,CAAC;MAC9B,MAAME,GAAG,GAAG;QAAE,GAAGD,OAAO,CAACH,QAAQ;MAAE,CAAC;MACpC,MAAMK,UAAU,GAAG,CAAC,GAAGD,GAAG,CAACR,KAAK,CAAC;MAEjC,MAAMU,aAAa,GAAGD,UAAU,CAACJ,QAAQ,CAAC;MAC1C,IAAIK,aAAa,KAAK,CAAC,IAAIA,aAAa,KAAK,IAAI,EAAE,OAAOH,OAAO;MAEjEE,UAAU,CAACJ,QAAQ,CAAC,GAAGK,aAAa,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC;MAElDH,OAAO,CAACH,QAAQ,CAAC,GAAG;QAClB,GAAGI,GAAG;QACNR,KAAK,EAAES;MACT,CAAC;MAED,OAAOF,OAAO;IAChB,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMI,QAAQ,GAAGnB,SAAS,CAACoB,IAAI,CAC7BD,QAAQ,IAAIA,QAAQ,CAACE,SAAS,KAAKpB,cACrC,CAAC;;EAED;EACA,IAAI,CAACF,OAAO,CAACuB,MAAM,EAAE;IACnB,oBACEpC,KAAA,CAAAqC,aAAA,CAAClC,GAAG;MACFmC,OAAO,EAAC,MAAM;MACdC,KAAK,EAAE,CAAE;MACTC,MAAM,EAAE,CAAE;MACVC,UAAU,EAAC,QAAQ;MACnBC,cAAc,EAAC,QAAQ;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACvBhD,KAAA,CAAAqC,aAAA,CAAC/B,UAAU;MAAC2C,KAAK,EAAC,QAAQ;MAACC,OAAO,EAAC,IAAI;MAACC,KAAK,EAAC,SAAS;MAAAR,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAC,sBAE5C,CACT,CAAC;EAEV;EAEA,oBACEhD,KAAA,CAAAqC,aAAA,CAACnC,IAAI;IAACkD,SAAS;IAACC,OAAO,EAAE,CAAE;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEzBhD,KAAA,CAAAqC,aAAA,CAACnC,IAAI;IAACoD,IAAI;IAACC,EAAE;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACXhD,KAAA,CAAAqC,aAAA,CAACjC,SAAS;IACRoD,SAAS;IACTC,MAAM;IACNC,KAAK,EAAE3C,cAAe;IACtBS,KAAK,EAAC,eAAe;IACrB0B,OAAO,EAAC,UAAU;IAClBS,QAAQ,EAAE3C,cAAe;IAAA2B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACxBnC,OAAO,CAAC+C,GAAG,CAACC,MAAM,iBACjB7D,KAAA,CAAAqC,aAAA,CAAChC,QAAQ;IAACyD,GAAG,EAAED,MAAM,CAACE,GAAI;IAACL,KAAK,EAAEG,MAAM,CAACE,GAAI;IAAApB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC1Ca,MAAM,CAACG,IACA,CACX,CACQ,CACP,CAAC,EAGN/B,QAAQ,iBACPjC,KAAA,CAAAqC,aAAA,CAACnC,IAAI;IAACoD,IAAI;IAACC,EAAE;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACXhD,KAAA,CAAAqC,aAAA,CAAC9B,uBAAuB;IAAC0D,KAAK,EAAExD,WAAY;IAAAkC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC1ChD,KAAA,CAAAqC,aAAA,CAAC7B,kBAAkB;IACjB0D,YAAY,EAAC,UAAU;IACvBC,MAAM,EAAC,MAAM;IACbX,SAAS;IACTY,EAAE,EAAC,YAAY;IACf5C,KAAK,EAAC,YAAY;IAClB6C,MAAM,EAAC,YAAY;IACnBC,OAAO,EAAE,IAAIC,IAAI,CAACtC,QAAQ,CAACuC,SAAS,CAAE;IACtCC,OAAO,EAAE,IAAIF,IAAI,CAACtC,QAAQ,CAACyC,OAAO,CAAE;IACpChB,KAAK,EAAEzC,YAAa;IACpB0C,QAAQ,EAAGgB,IAAI,IAAKzD,YAAY,CAACyD,IAAI,GAAGA,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAE;IAC9DC,mBAAmB,EAAE;MACnB,YAAY,EAAE;IAChB,CAAE;IAAAlC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACH,CACsB,CACrB,CACP,EAGA/B,YAAY,IAAI6D,KAAK,CAACC,OAAO,CAAC5D,KAAK,CAAC,IAAIA,KAAK,CAACiB,MAAM,GAAG,CAAC,iBACvDpC,KAAA,CAAAqC,aAAA,CAACnC,IAAI;IAACoD,IAAI;IAACC,EAAE;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACXhD,KAAA,CAAAqC,aAAA,CAACjC,SAAS;IACRoD,SAAS;IACTC,MAAM;IACNC,KAAK,EAAEtC,YAAa;IACpBI,KAAK,EAAC,aAAa;IACnB0B,OAAO,EAAC,UAAU;IAClBS,QAAQ,EAAEtC,YAAa;IAAAsB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACtB7B,KAAK,CAACyC,GAAG,CAAC,CAACoB,IAAI,EAAEC,KAAK,kBACrBjF,KAAA,CAAAqC,aAAA,CAAChC,QAAQ;IAACyD,GAAG,EAAEkB,IAAI,GAAG,GAAG,GAAGC,KAAM;IAACvB,KAAK,EAAEsB,IAAK;IAAArC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC5CgC,IACO,CACX,CACQ,CACP,CACP,EAGA5D,YAAY,iBACXpB,KAAA,CAAAqC,aAAA,CAACnC,IAAI;IAACoD,IAAI;IAACC,EAAE,EAAE,EAAG;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAChBhD,KAAA,CAAAqC,aAAA,CAAC3B,YAAY;IACXY,KAAK,EAAEA,KAAM;IACb4D,YAAY,EAAEzD,gBAAiB;IAAAkB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAChC,CACG,CAEJ,CAAC;AAEX","ignoreList":[]},"metadata":{},"sourceType":"module"}